<div *ngIf="authService.isAdmin()">
  <h2 class="page-title">Gestión de Usuarios</h2>
  <table class="user-table">
    <thead>
      <tr>
        <th>Nombre de Usuario</th>
        <th>Correo Electrónico</th>
        <th>Rol</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role }}</td>
        <td>
          <button class="btn btn-edit" (click)="editUser(user)">Editar</button>
          <button class="btn btn-delete" (click)="deleteUser(user.id)" *ngIf="user.role !== 'admin'">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Modal de edición de usuario -->
  <div *ngIf="selectedUser" class="modal-overlay">
    <div class="modal-container">
      <div class="modal-header">
        <h2>Editar Usuario</h2>
        <button class="modal-close" (click)="cancelEdit()">&times;</button>
      </div>
      <form (ngSubmit)="updateUser()" class="modal-form">
        <div class="form-group">
          <label for="username">Nombre de Usuario</label>
          <input 
            id="username"
            class="form-control" 
            [(ngModel)]="selectedUser.username" 
            name="username" 
            required
            placeholder="Ingrese nombre de usuario"
          >
        </div>
        <div class="form-group">
          <label for="email">Correo Electrónico</label>
          <input 
            id="email"
            class="form-control" 
            [(ngModel)]="selectedUser.email" 
            name="email" 
            type="email"
            required
            placeholder="Ingrese correo electrónico"
          >
        </div>
        <div class="form-group">
          <label for="role">Rol</label>
          <select 
            id="role"
            class="form-control" 
            [(ngModel)]="selectedUser.role" 
            name="role" 
            required
          >
            <option value="admin">Administrador</option>
            <option value="user">Usuario</option>
          </select>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-cancel" (click)="cancelEdit()">Cancelar</button>
          <button type="submit" class="btn btn-save">Guardar Cambios</button>
        </div>
      </form>
    </div>
  </div>
  
  <p *ngIf="!users.length">No se encontraron usuarios</p>
</div>
<div *ngIf="!authService.isAdmin()">
  <p>Acceso Denegado: Solo Administradores</p>
</div>